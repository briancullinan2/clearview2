<Page
	x:Class="EPICClearView.User.Login" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	Title="Login As"
	SnapsToDevicePixels="True"
	UseLayoutRounding="True"
	FocusManager.FocusedElement="{Binding ElementName=Username}">
	<FrameworkElement.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary
					Source="/Themes/ClearView.xaml" />
			</ResourceDictionary.MergedDictionaries>
			<BitmapImage
				UriSource="/Resources/0132-lock.png"
				x:Key="Lock" />
			<BitmapImage
				UriSource="/Resources/0145-task_edit.png"
				x:Key="Edit" />
		</ResourceDictionary>
	</FrameworkElement.Resources>
	<ScrollViewer
		VerticalScrollBarVisibility="Auto"
		HorizontalScrollBarVisibility="Auto">
		<Grid
			HorizontalAlignment="Center"
			VerticalAlignment="Center">
			<Grid.ColumnDefinitions>
				<ColumnDefinition
					Width="Auto" />
				<ColumnDefinition
					Width="75" />
				<ColumnDefinition
					Width="150" />
			</Grid.ColumnDefinitions>
			<Grid.RowDefinitions>
				<RowDefinition />
				<RowDefinition />
				<RowDefinition />
				<RowDefinition />
			</Grid.RowDefinitions>
			<Image
				Source="{StaticResource Lock}"
				HorizontalAlignment="Center"
				VerticalAlignment="Center"
				Width="80"
				Grid.RowSpan="3" />
			<Label
				Grid.Column="1"
				Content="Username:" />
			<TextBox
				Name="Username"
				Margin="5"
				Grid.Column="2"
				VerticalAlignment="Top" />
			<Label
				Grid.Column="1"
				Grid.Row="1"
				Content="Password:" />
			<PasswordBox
				Name="Password"
				Margin="5"
				Grid.Row="1"
				Grid.Column="2"
				VerticalAlignment="Top" />
			<Grid
				Row="2"
				Column="1"
				ColumnSpan="2">
				<StackPanel
					HorizontalAlignment="Right"
					Orientation="Horizontal">
					<Button
						Content="Login"
						HorizontalAlignment="Right"
						IsDefault="True"
						Click="Login_Click" />
					<Button
						Content="Cancel"
						HorizontalAlignment="Right"
						IsCancel="True"
						Click="Cancel_Click" />
				</StackPanel>
				<ToggleButton
					Name="Options"
					IsChecked="False"
					Content="Options"
					HorizontalAlignment="Left" />
			</Grid>
			<Label
				Name="DatabaseLabel"
				Grid.Column="1"
				Grid.Row="3"
				Content="Database:">
				<FrameworkElement.Style>
                    <Style>
                        <Style.Triggers>
                            <DataTrigger
								Value="True"
								Binding="{Binding IsChecked, ElementName=Options}">
                            </DataTrigger>
                            <DataTrigger
								Value="True"
								Binding="{Binding IsChecked, ElementName=ToggleDatabase}">
                            </DataTrigger>
						</Style.Triggers>
					</Style>
				</FrameworkElement.Style>
			</Label>
			<Grid
				Row="3"
				Column="2"
				ZIndex="1">
				<FrameworkElement.Style>
                    <Style>
                        <Style.Triggers>
                            <DataTrigger
								Value="True"
								Binding="{Binding IsChecked, ElementName=Options}">
                            </DataTrigger>
						</Style.Triggers>
					</Style>
				</FrameworkElement.Style>
				<Grid.ColumnDefinitions>
					<ColumnDefinition />
					<ColumnDefinition
						Width="Auto" />
				</Grid.ColumnDefinitions>
				<ComboBox
					Name="Connection"
					IsEditable="True"
					Margin="5"
					VerticalAlignment="Top"
					IsTextSearchEnabled="False"
					Loaded="Connection_Loaded"
					TextBoxBase.TextChanged="Connection_TextChanged">
					<FrameworkElement.Style>
						<Style
							TargetType="{x:Type ComboBox}">
							<Setter
								Property="Visibility"
								Value="Visible" />
							<Style.Triggers>
								<DataTrigger
									Value="True"
									Binding="{Binding IsChecked, ElementName=ToggleDatabase}">
									<Setter
										Property="Visibility"
										Value="Collapsed" />
								</DataTrigger>
							</Style.Triggers>
						</Style>
					</FrameworkElement.Style>
				</ComboBox>
				<ToggleButton
					Name="ToggleDatabase"
					IsChecked="False"
					VerticalAlignment="Top"
					Grid.Column="1"
					Padding="2">
					<Image
						Source="{StaticResource Edit}"
						Height="15"
						Width="15">
						<FrameworkElement.Style>
							<Style
								TargetType="{x:Type Image}">
								<Style.Triggers>
									<DataTrigger
										Value="False"
										Binding="{Binding IsEnabled, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Button}}}">
										<Setter
											Property="UIElement.Opacity"
											Value=".5" />
									</DataTrigger>
								</Style.Triggers>
							</Style>
						</FrameworkElement.Style>
					</Image>
				</ToggleButton>
			</Grid>
			<Grid
				Row="3"
				Column="1"
				ColumnSpan="2"
				ZIndex="0">
				<FrameworkElement.Style>
                    <Style>
                        <Style.Triggers>
							<MultiDataTrigger>
                                <MultiDataTrigger.Conditions>
                                    <Condition
										Value="True"
										Binding="{Binding IsChecked, ElementName=ToggleDatabase}" />
                                    <Condition
										Value="True"
										Binding="{Binding IsChecked, ElementName=Options}" />
                                </MultiDataTrigger.Conditions>
                            </MultiDataTrigger>
						</Style.Triggers>
					</Style>
				</FrameworkElement.Style>
				<Grid.RowDefinitions>
					<RowDefinition />
					<RowDefinition />
					<RowDefinition />
					<RowDefinition />
					<RowDefinition />
					<RowDefinition />
					<RowDefinition />
					<RowDefinition />
				</Grid.RowDefinitions>
				<Label
					Content="Server:" />
				<ComboBox
					Name="Servers"
					IsEditable="True"
					Grid.Row="1"
					TextBoxBase.TextChanged="Servers_TextChanged">
					<ComboBoxItem
						IsEnabled="False"
						Content="Loading..." />
				</ComboBox>
				<Label
					Content="Database:"
					Grid.Row="2" />
				<ComboBox
					Name="Databases"
					IsEditable="True"
					Grid.Row="3"
					TextBoxBase.TextChanged="Databases_TextChanged" />
				<Label
					Content="Username:"
					Grid.Row="4" />
				<TextBox
					Name="DbUser"
					Grid.Row="5" />
				<Label
					Content="Password:"
					Grid.Row="6" />
				<PasswordBox
					Name="DbPass"
					Grid.Row="7" />
			</Grid>
		</Grid>
	</ScrollViewer>
</Page>
