<ResourceDictionary
    x:Class="EPIC.MedicalControls.Controls.User.Add"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:entities="clr-namespace:EPIC.DataLayer.Entities;assembly=DataLayer"
    xmlns:general="clr-namespace:EPIC.MedicalControls.Themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:reflection="clr-namespace:System.Reflection;assembly=mscorlib"
    xmlns:ribbon="clr-namespace:System.Windows.Controls.Ribbon;assembly=System.Windows.Controls.Ribbon"
    xmlns:system="clr-namespace:System;assembly=mscorlib"
    mc:Ignorable="d">
	<ItemsPanelTemplate x:Key="UserEntityPanelTemplate">
		<Grid>
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*" />
				<ColumnDefinition Width="Auto" />
				<ColumnDefinition Width="*" />
			</Grid.ColumnDefinitions>
			<Grid.RowDefinitions>
				<RowDefinition />
				<RowDefinition />
			</Grid.RowDefinitions>
		</Grid>
	</ItemsPanelTemplate>

	<DataTemplate x:Key="UserEntityItemTemplate" DataType="{x:Type general:PropertyMetadata}">
		<ContentPresenter
            x:Name="Presenter"
            MaxWidth="Infinity"
            Margin="5">
			<ContentPresenter.ContentTemplate>
				<DataTemplate>
					<Label Content="{Binding Name}" Foreground="Gray" />
				</DataTemplate>
			</ContentPresenter.ContentTemplate>
		</ContentPresenter>

		<DataTemplate.Triggers>
			<DataTrigger Binding="{Binding Name}" Value="MiddleInitial">
				<Setter TargetName="Presenter" Property="MaxWidth" Value="100" />
			</DataTrigger>
			<DataTrigger Binding="{Binding PropertyType}" Value="{x:Type system:String}">
				<Setter TargetName="Presenter" Property="ContentTemplate">
					<Setter.Value>
						<DataTemplate>
							<StackPanel Name="ControlWrapper">
								<Label Content="{Binding Name}" FontWeight="Bold" />
								<TextBox
                                    Name="PropertyName"
                                    MaxLength="{Binding MaxLength}"
                                    Text="{Binding Value}" />
							</StackPanel>
						</DataTemplate>
					</Setter.Value>
				</Setter>
			</DataTrigger>
		</DataTemplate.Triggers>
	</DataTemplate>


	<Style x:Key="UserItemsGridStyle" TargetType="ContentPresenter">
		<Setter Property="Grid.Column" Value="0" />

		<Style.Triggers>
			<DataTrigger Binding="{Binding Name}" Value="MiddleInitial">
				<Setter Property="Grid.Column" Value="1" />
			</DataTrigger>
			<DataTrigger Binding="{Binding Name}" Value="LastName">
				<Setter Property="Grid.Column" Value="2" />
			</DataTrigger>
		</Style.Triggers>
	</Style>

	<Style x:Key="UserEntityStyle" TargetType="{x:Type ItemsControl}">
		<Setter Property="ItemsSource" Value="{Binding DataContext}" />
		<Setter Property="ItemsPanel" Value="{StaticResource UserEntityPanelTemplate}" />

		<Setter Property="ItemContainerStyle" Value="{StaticResource UserItemsGridStyle}" />
		<Setter Property="ItemTemplate" Value="{StaticResource UserEntityItemTemplate}" />
	</Style>


	<Style x:Key="UserLoginEntityStyle" TargetType="{x:Type ItemsControl}">
		<Setter Property="ItemsSource" Value="{Binding DataContext}" />
		<Setter Property="ItemContainerStyle" Value="{StaticResource UserItemsGridStyle}" />
		<Setter Property="ItemTemplate" Value="{StaticResource UserEntityItemTemplate}" />
	</Style>
</ResourceDictionary>