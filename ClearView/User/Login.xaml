<Page
    x:Class="EPIC.ClearView.User.Login"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Login As"
    FocusManager.FocusedElement="{Binding ElementName=Username}"
    SnapsToDevicePixels="True"
    UseLayoutRounding="True">
    <FrameworkElement.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Themes/ClearView.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <BitmapImage x:Key="Lock" UriSource="/Resources/0132-lock.png" />
            <BitmapImage x:Key="Edit" UriSource="/Resources/0145-task_edit.png" />
        </ResourceDictionary>
    </FrameworkElement.Resources>
    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
        <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="75" />
                <ColumnDefinition Width="150" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>
            <Image
                Grid.RowSpan="3"
                Width="80"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Source="{StaticResource Lock}" />
            <Label Grid.Column="1" Content="Username:" />
            <TextBox
                Name="Username"
                Grid.Column="2"
                Margin="5"
                VerticalAlignment="Top" />
            <Label
                Grid.Row="1"
                Grid.Column="1"
                Content="Password:" />
            <PasswordBox
                Name="Password"
                Grid.Row="1"
                Grid.Column="2"
                Margin="5"
                VerticalAlignment="Top" />
            <Grid
                Column="1"
                ColumnSpan="2"
                Row="2">
                <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                    <Button
                        HorizontalAlignment="Right"
                        Click="Login_Click"
                        Content="Login"
                        IsDefault="True" />
                    <Button
                        HorizontalAlignment="Right"
                        Click="Cancel_Click"
                        Content="Cancel"
                        IsCancel="True" />
                </StackPanel>
                <ToggleButton
                    Name="Options"
                    HorizontalAlignment="Left"
                    Content="Options"
                    IsChecked="False" />
            </Grid>
            <Label
                Name="DatabaseLabel"
                Grid.Row="3"
                Grid.Column="1"
                Content="Database:">
                <FrameworkElement.Style>
                    <Style>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsChecked, ElementName=Options}" Value="True" />
                            <DataTrigger Binding="{Binding IsChecked, ElementName=ToggleDatabase}" Value="True" />
                        </Style.Triggers>
                    </Style>
                </FrameworkElement.Style>
            </Label>
            <Grid
                Column="2"
                Row="3"
                ZIndex="1">
                <FrameworkElement.Style>
                    <Style>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsChecked, ElementName=Options}" Value="True" />
                        </Style.Triggers>
                    </Style>
                </FrameworkElement.Style>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <ComboBox
                    Name="Connection"
                    Margin="5"
                    VerticalAlignment="Top"
                    IsEditable="True"
                    IsTextSearchEnabled="False"
                    Loaded="Connection_Loaded"
                    TextBoxBase.TextChanged="Connection_TextChanged">
                    <FrameworkElement.Style>
                        <Style TargetType="{x:Type ComboBox}">
                            <Setter Property="Visibility" Value="Visible" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsChecked, ElementName=ToggleDatabase}" Value="True">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </FrameworkElement.Style>
                </ComboBox>
                <ToggleButton
                    Name="ToggleDatabase"
                    Grid.Column="1"
                    Padding="2"
                    VerticalAlignment="Top"
                    IsChecked="False">
                    <Image
                        Width="15"
                        Height="15"
                        Source="{StaticResource Edit}">
                        <FrameworkElement.Style>
                            <Style TargetType="{x:Type Image}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsEnabled, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Button}}}" Value="False">
                                        <Setter Property="UIElement.Opacity" Value=".5" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </FrameworkElement.Style>
                    </Image>
                </ToggleButton>
            </Grid>
            <Grid
                Column="1"
                ColumnSpan="2"
                Row="4"
                ZIndex="0">
                <FrameworkElement.Style>
                    <Style>
                        <Style.Triggers>
                            <MultiDataTrigger>
                                <MultiDataTrigger.Conditions>
                                    <Condition Binding="{Binding IsChecked, ElementName=ToggleDatabase}" Value="True" />
                                    <Condition Binding="{Binding IsChecked, ElementName=Options}" Value="True" />
                                </MultiDataTrigger.Conditions>
                            </MultiDataTrigger>
                        </Style.Triggers>
                    </Style>
                </FrameworkElement.Style>
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Label Content="Server:" />
                <ComboBox
                    Name="Servers"
                    Grid.Row="1"
                    IsEditable="True"
                    TextBoxBase.TextChanged="Servers_TextChanged">
                    <ComboBoxItem Content="Loading..." IsEnabled="False" />
                </ComboBox>
                <Label Grid.Row="2" Content="Database:" />
                <ComboBox
                    Name="Databases"
                    Grid.Row="3"
                    IsEditable="True"
                    TextBoxBase.TextChanged="Databases_TextChanged" />
                <Label Grid.Row="4" Content="Username:" />
                <TextBox Name="DbUser" Grid.Row="5" />
                <Label Grid.Row="6" Content="Password:" />
                <PasswordBox Name="DbPass" Grid.Row="7" />
            </Grid>
        </Grid>
    </ScrollViewer>
</Page>
